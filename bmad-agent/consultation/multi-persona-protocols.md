# Multi-Persona Consultation Protocols (Memory-Enhanced)

## Purpose
Enable structured consultation between multiple BMAD personas simultaneously while maintaining clear role boundaries and leveraging accumulated consultation intelligence for superior collaborative problem-solving.

## Memory-Enhanced Consultation Types

### Design Review Council
**Participants**: PM + Architect + Design Architect
**Memory Context**: Previous design decisions, successful architecture patterns, UI/UX outcome patterns
**Use Cases**: 
- Major architectural decisions with UI implications
- Technology choices affecting user experience
- Design system and component architecture decisions
- Performance vs. aesthetics trade-offs

**Memory-Enhanced Protocol**:
1. **Pre-Consultation Memory Briefing**: Search for similar design decisions and their outcomes
2. **PM Problem Presentation**: Enhanced with memory of similar product requirements and their design implications
3. **Independent Analysis Phase**: Each specialist provides analysis informed by relevant memory patterns
4. **Memory-Informed Debate**: Structured discussion leveraging lessons from similar past decisions
5. **Consensus Building**: Decision-making enhanced with memory of successful design decision outcomes
6. **Memory Documentation**: Capture consultation outcome with rich context for future reference

### Technical Feasibility Panel
**Participants**: Architect + Dev + SM
**Memory Context**: Implementation complexity patterns, timeline estimation accuracy, technical risk outcomes
**Use Cases**:
- Implementation complexity assessment for new features
- Timeline estimation and resource planning
- Technical risk evaluation and mitigation planning
- Technology evaluation and adoption decisions

**Memory-Enhanced Protocol**:
1. **Context Loading**: Search memory for similar technical assessments and their accuracy
2. **Architect Technical Requirements**: Present requirements enhanced with memory of similar technical challenges
3. **Dev Implementation Analysis**: Complexity assessment informed by memory of similar implementation outcomes
4. **SM Project Impact Evaluation**: Timeline and resource analysis enhanced with memory of similar project patterns
5. **Collaborative Risk Assessment**: Combined analysis leveraging memory of technical risk outcomes
6. **Memory-Informed Estimation**: Provide estimates enhanced with memory of similar project completion patterns

### Product Strategy Committee
**Participants**: PM + PO + Analyst
**Memory Context**: Market strategy outcomes, feature prioritization results, scope decision impacts
**Use Cases**:
- Market strategy and positioning decisions
- Feature prioritization and roadmap planning
- Scope decisions and MVP definition
- User feedback integration and product direction

**Memory-Enhanced Protocol**:
1. **Market Intelligence Integration**: Analyst presents research enhanced with memory of similar market contexts
2. **Product Strategy Analysis**: PM provides strategy perspective informed by memory of similar product outcomes
3. **Development Impact Assessment**: PO evaluates current development impact using memory of similar scope changes
4. **Strategic Alignment Discussion**: Collaborative analysis leveraging memory of successful product strategies
5. **Prioritized Recommendations**: Decision-making enhanced with memory of feature prioritization outcomes

### Emergency Response Team
**Participants**: Context-dependent (2-3 most relevant personas)
**Memory Context**: Crisis resolution patterns, rapid decision outcomes, emergency response effectiveness
**Use Cases**:
- Critical bugs requiring immediate resolution
- Scope emergencies and major requirement changes
- Technical blockers threatening project timeline
- Resource or timeline crisis management

**Memory-Enhanced Rapid Response Protocol**:
1. **Immediate Memory Query**: Search for similar crisis situations and resolution patterns (1 minute)
2. **Rapid Problem Assessment**: 5 minutes per persona enhanced with memory of similar crisis patterns
3. **Memory-Informed Options**: Identify action options based on memory of successful crisis resolutions
4. **Risk/Benefit Analysis**: Quick analysis leveraging memory of similar decision outcomes
5. **Rapid Decision with Learning**: Make decision enhanced with memory insights and document for future crises

## Memory-Enhanced Consultation Structure Template

### Opening Phase (5 minutes) - Memory-Informed Setup
**Moderator Role**: PO or user-designated
**Memory Integration**: Search for similar consultation contexts and successful facilitation patterns

1. **Problem Statement with Context**: Clear issue description enhanced with relevant memory context
2. **Historical Context Briefing**: Brief presentation of similar past situations and their outcomes
3. **Consultation Objectives**: Decision goals informed by memory of successful consultation outcomes
4. **Constraints with Precedent**: Limitations enhanced with memory of how similar constraints were handled
5. **Success Criteria**: Measures informed by memory of effective consultation outcomes

### Analysis Phase (15 minutes) - Memory-Enhanced Individual Perspectives
**Individual Perspectives** (5 minutes each persona):
**Memory Enhancement**: Each persona briefed with relevant domain-specific memories before analysis

#### Per-Persona Memory Briefing Template:
```markdown
## üé≠ {Persona Name} - Memory-Enhanced Consultation Brief

### Your Domain Context
**Current Situation**: {immediate_consultation_context}
**Your Expertise Focus**: {persona_domain_responsibility}

### üìö Relevant Memory Context
**Similar Situations You've Handled**:
- **Case 1**: {similar_situation_summary} ‚Üí **Outcome**: {result} ‚Üí **Lesson**: {key_insight}
- **Case 2**: {similar_situation_summary} ‚Üí **Outcome**: {result} ‚Üí **Lesson**: {key_insight}

**Successful Patterns in Your Domain**:
- ‚úÖ **What typically works**: {proven_approaches_for_persona}
- ‚ö†Ô∏è **Common pitfalls to avoid**: {anti_patterns_for_persona}
- üéØ **Best practices**: {optimization_patterns_for_persona}

### ü§ù Cross-Persona Collaboration Insights
**Effective Collaboration Patterns**: {memory_of_successful_consultation_approaches}
**Communication Strategies**: {proven_ways_to_convey_domain_expertise}
**Common Integration Points**: {typical_overlap_areas_with_other_personas}

### üí° Consultation-Specific Intelligence
**For This Type of Decision**: {consultation_type_specific_insights}
**Typical Outcomes**: {memory_of_similar_consultation_results}
**Success Factors**: {what_typically_leads_to_good_outcomes}
```

### Synthesis Phase (10 minutes) - Memory-Enhanced Collaborative Analysis
**Collaborative Discussion Structure**:

1. **Agreement Identification with Precedent**: Where personas align, enhanced with memory of similar consensus outcomes
2. **Disagreement Mapping with Historical Context**: Specific contentions analyzed against memory of similar debates and their resolutions
3. **Trade-off Analysis with Outcome Memory**: Pros/cons discussion leveraging memory of similar trade-off outcomes
4. **Assumption Validation with Pattern Recognition**: Challenge assumptions using memory of similar assumption failures/successes

### Resolution Phase (10 minutes) - Memory-Enhanced Decision Making
**Decision Making Process**:

1. **Consensus Check with Confidence Scoring**: Agreement assessment enhanced with memory-based confidence levels
2. **Minority Opinion Documentation**: Dissenting views captured with memory context of similar minority positions and their eventual validation
3. **Implementation Considerations with Pattern Application**: Next steps informed by memory of similar decision implementation outcomes
4. **Success Monitoring Plan**: Tracking approach based on memory of effective decision outcome measurement

## Memory-Enhanced Quality Control Measures

### Role Integrity Maintenance with Memory Support
- **Memory-Informed Persona Consistency**: Each persona maintains perspective enhanced with domain-specific memory context
- **Historical Pattern Validation**: Ensure persona advice aligns with memory of their successful domain approaches
- **Cross-Consultation Learning**: Apply memory of effective persona collaboration patterns
- **Expertise Boundary Enforcement**: Use memory patterns to maintain clear domain expertise boundaries

### Structured Communication with Memory Intelligence
- **Memory-Informed Facilitation**: Moderator uses memory of successful consultation facilitation patterns
- **Historical Context Integration**: Relevant past consultation outcomes woven into discussion
- **Pattern Recognition Facilitation**: Moderator identifies emerging patterns based on memory of similar consultations
- **Learning Integration**: Real-time application of consultation improvement insights from memory

### Decision Documentation with Memory Enhancement
**Enhanced Consultation Record**:
```markdown
# Memory-Enhanced Multi-Persona Consultation Summary
**Date**: {timestamp}
**Type**: {consultation-type}  
**Participants**: {persona-list}
**Duration**: {actual-time}

## Problem Context
**Current Issue**: {problem-description}
**Historical Context**: {similar-past-situations}
**Memory Insights Applied**: {relevant-historical-lessons}

## Individual Perspectives (Memory-Enhanced)
### {Persona 1 Name}
**Analysis**: {domain-specific-perspective}
**Memory Context Applied**: {relevant-historical-patterns}
**Confidence Level**: {confidence-based-on-similar-situations}

[Similar structure for each participant]

## Consensus Decision
**Final Recommendation**: {decision}
**Memory-Informed Rationale**: {reasoning-enhanced-with-historical-context}
**Implementation Approach**: {next-steps-based-on-proven-patterns}
**Success Probability**: {confidence-based-on-similar-outcomes}%

## Historical Validation
**Similar Past Decisions**: {relevant-precedents}
**Outcome Patterns**: {what-typically-happens-with-similar-decisions}
**Risk Mitigation**: {preventive-measures-based-on-memory}

## Learning Integration
**New Patterns Identified**: {novel-insights-from-this-consultation}
**Refinements to Existing Patterns**: {updates-to-memory-based-on-outcomes}
**Cross-Consultation Insights**: {collaboration-improvements-discovered}

## Memory Creation
**Memories Created**: 
- Decision Memory: {decision-memory-summary}
- Consultation Pattern Memory: {collaboration-pattern-memory}
- Outcome Tracking Memory: {success-monitoring-memory}
```

## Consultation Effectiveness Enhancement

### Pre-Consultation Optimization
**Memory-Based Participant Selection**:
- Analyze problem type against memory of most effective persona combinations
- Select participants based on memory of successful collaboration patterns
- Consider consultation type effectiveness history for optimal duration and structure

### During-Consultation Intelligence
**Real-Time Memory Integration**:
- Surface relevant memories as consultation topics emerge
- Provide historical context for emerging disagreements
- Apply memory of successful conflict resolution patterns
- Use memory of effective decision-making approaches

### Post-Consultation Learning
**Consultation Outcome Tracking**:
```python
def track_consultation_outcome(consultation_id, implementation_details):
    outcome_memory = {
        "type": "consultation_outcome",
        "consultation_id": consultation_id,
        "implementation_approach": implementation_details,
        "participants": consultation_participants,
        "decision": final_decision,
        "success_metrics": define_success_criteria(),
        "follow_up_schedule": [
            {"timeframe": "1_week", "check": "immediate_implementation_issues"},
            {"timeframe": "1_month", "check": "decision_effectiveness"},
            {"timeframe": "3_months", "check": "long_term_outcome_validation"}
        ],
        "collaboration_effectiveness": rate_collaboration_quality(),
        "memory_insights_effectiveness": rate_memory_integration_value()
    }
    
    add_memories(outcome_memory, tags=["consultation", "outcome", consultation_type])
```

## Integration with BMAD Orchestrator

### Consultation Mode Activation
```markdown
## Consultation Commands Integration
- `/consult {type}`: Activate memory-enhanced consultation with automatic participant selection
- `/consult custom {persona1,persona2,persona3}`: Custom consultation with memory briefing for selected personas
- `/consult-history`: Show memory of past consultations and their outcomes
- `/consult-patterns`: Display successful consultation patterns for current context
```

### Memory-Enhanced Consultation Flow
1. **Command Recognition**: Orchestrator identifies consultation request
2. **Memory Context Loading**: Search for relevant consultation patterns and outcomes
3. **Participant Briefing**: Each selected persona receives memory-enhanced domain briefing
4. **Structured Facilitation**: Execute consultation protocol with memory integration
5. **Outcome Documentation**: Create rich memory entries for future consultation enhancement
6. **Learning Integration**: Update consultation effectiveness patterns based on outcomes

### Quality Assurance Integration
- **Consultation Effectiveness Tracking**: Monitor success rates of memory-enhanced consultations vs. standard approaches
- **Pattern Refinement**: Continuously improve consultation protocols based on outcome memory
- **Participant Optimization**: Learn optimal persona combinations for different problem types
- **Facilitation Enhancement**: Improve moderation approaches based on consultation outcome patterns